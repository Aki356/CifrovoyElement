(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))i(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const l of n.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function s(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerPolicy&&(n.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?n.credentials="include":e.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(e){if(e.ep)return;e.ep=!0;const n=s(e);fetch(e.href,n)}})();const u=(o,t=document)=>t.querySelector(o),b=(o,t=document)=>[...t.querySelectorAll(o)];function y(o,t){const s=o.querySelectorAll('a[href], button:not([disabled]), textarea, input, select, [tabindex]:not([tabindex="-1"])');if(!s.length)return;const i=s[0],e=s[s.length-1];t.shiftKey&&document.activeElement===i?(e.focus(),t.preventDefault()):!t.shiftKey&&document.activeElement===e&&(i.focus(),t.preventDefault())}class p{constructor(t){this.root=u(t),this.window=u(".modal__window",this.root),this.onKeydown=this.onKeydown.bind(this),this.onOverlay=this.onOverlay.bind(this),this.onCloseBtn=this.onCloseBtn.bind(this)}open(){if(!this.root)return;this.root.classList.add("is-open"),document.body.classList.add("scroll-lock"),this.root.setAttribute("aria-hidden","false"),(this.window.querySelector("button, input, textarea")||this.window).focus(),this.attach()}close(){this.root&&(this.root.classList.remove("is-open"),document.body.classList.remove("scroll-lock"),this.root.setAttribute("aria-hidden","true"),this.detach())}attach(){document.addEventListener("keydown",this.onKeydown,{passive:!0}),this.root.addEventListener("click",this.onOverlay);const t=u('[data-close="button"]',this.root);t&&t.addEventListener("click",this.onCloseBtn)}detach(){document.removeEventListener("keydown",this.onKeydown),this.root.removeEventListener("click",this.onOverlay);const t=u('[data-close="button"]',this.root);t&&t.removeEventListener("click",this.onCloseBtn)}onKeydown(t){t.key==="Escape"&&this.close(),t.key==="Tab"&&y(this.window,t)}onOverlay(t){var s,i;((i=(s=t.target)==null?void 0:s.dataset)==null?void 0:i.close)==="overlay"&&this.close()}onCloseBtn(){this.close()}}const g=/^[^\s@]+@[^\s@]+\.[^\s@]{2,}$/i,v={required:o=>String(o??"").trim().length?"":"This field is required",email:o=>g.test(String(o??"").trim())?"":"Invalid email",tel:o=>/^\+?\d[\d ()-]{6,}$/.test(String(o??"").trim())?"":"Invalid phone",min:(o,t)=>String(o??"").trim().length>=+t?"":`Min ${t} characters`,max:(o,t)=>String(o??"").trim().length<=+t?"":`Max ${t} characters`,pattern:(o,t)=>new RegExp(t).test(String(o??""))?"":"Invalid value"};function S(o,t){const[s,i]=t.split(":"),e=v[s];return e?e(o,i):""}function w(o){var i;const t=[...o.querySelectorAll("[data-validate]")],s={};for(const e of t){const n=e.name||e.id,l=(e.dataset.validate||"").split("|").filter(Boolean);let c="";for(const m of l)if(c=S(e.value,m),c)break;const r=o.querySelector(`[data-error-for="${n}"]`);c?(s[n]=c,r&&(r.textContent=c,r.hidden=!1),e.setAttribute("aria-invalid","true")):(r&&(r.textContent="",r.hidden=!0),e.removeAttribute("aria-invalid"))}if(Object.keys(s).length){const e=Object.keys(s)[0];(i=o.querySelector(`[name="${e}"], #${e}`))==null||i.focus()}return{ok:!Object.keys(s).length,errors:s}}class E{constructor(t,s={}){this.form=u(t),this.options={endpoint:"https://httpbingo.org/post",onSent:null,onError:null,...s},this.isSubmitting=!1,this.ctrl=null,this.onSubmit=this.onSubmit.bind(this)}init(){this.form&&this.form.addEventListener("submit",this.onSubmit)}destroy(){this.form&&this.form.removeEventListener("submit",this.onSubmit)}get btn(){var t;return(t=this.form)==null?void 0:t.querySelector('[type="submit"], .form__submit')}setSubmitting(t){var s;this.isSubmitting=t,this.btn&&(this.btn.disabled=t,this.btn.setAttribute("aria-disabled",String(t)),this.btn.classList.toggle("is-loading",t)),(s=this.form)==null||s.setAttribute("aria-busy",String(t))}serialize(){const t=new FormData(this.form),s={};for(const[i,e]of t.entries())i in s?s[i]=Array.isArray(s[i])?[...s[i],e]:[s[i],e]:s[i]=e;return s}async onSubmit(t){if(t.preventDefault(),this.isSubmitting||!this.form)return;const{ok:s}=w(this.form);if(!s)return;const i=this.serialize();try{this.setSubmitting(!0),this.ctrl&&this.ctrl.abort(),this.ctrl=new AbortController;const e=await fetch(this.options.endpoint,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i),signal:this.ctrl.signal});if(!e.ok)throw new Error(`HTTP ${e.status}`);this.form.reset(),this.form.dispatchEvent(new CustomEvent("form:sent",{bubbles:!0,detail:{payload:i,res:e}})),typeof this.options.onSent=="function"&&this.options.onSent(i,e)}catch(e){this.form.dispatchEvent(new CustomEvent("form:error",{bubbles:!0,detail:e})),e.name!=="AbortError"&&typeof this.options.onError=="function"&&this.options.onError(e)}finally{setTimeout(()=>this.setSubmitting(!1),250)}}}const f=new p("#contact-modal");b('[data-modal="contact"]').forEach(o=>{o.addEventListener("click",()=>f.open())});const a=(()=>{let o=document.getElementById("toast");return o||(o=document.createElement("div"),o.id="toast",o.className="toast",o.setAttribute("role","status"),o.setAttribute("aria-live","polite"),document.body.appendChild(o)),o})();let d;function h(o,{timeout:t=4e3,type:s="success"}={}){a.textContent=o,a.classList.toggle("toast--error",s==="error"),a.classList.add("is-shown"),clearTimeout(d),d=setTimeout(()=>{a.classList.remove("is-shown")},t),a.onclick=()=>{a.classList.remove("is-shown"),clearTimeout(d)}}const L=new E("#contact-form",{onSent:()=>{f.close(),h("The message has been sent! We will contact you shortly.")},onError:()=>{h("Failed to submit the form. Please try again.",{type:"error"})}});L.init();
